# AWZ: UTM метки (письма, заказы) [awz.utm]

### [Установка модуля](https://github.com/zahalski/awz.utm/tree/main/docs/install.md)

<!-- desc-start -->

Модуль предоставляет возможность отслеживать рекламные каналы, через которые клиент оставил заявку или оформил заказ, не только со страницы входа, но и с любой другой страницы, даже при повторном входе спустя длительное время.

#### Модуль запоминает:
- utm_source (Источник кампании),
- utm_medium (Тип трафика),
- utm_campaign (Название кампании),
- utm_content (Идентификатор объявления),
- utm_term (Ключевое слово).

#### И сохраняет UTM-метки в:
- Базу данных (срок действия записей, опциональный);
- Cookies (файлы на устройстве пользователя);
- Заказ (при создании заказа, на обработчике, опционально);
- При отправке писем (на обработчике, опционально).

**Поддерживаемые редакции CMS Битрикс:**<br>
«Старт», «Стандарт», «Малый бизнес», «Бизнес», «Корпоративный портал», «Энтерпрайз», «Интернет-магазин + CRM»

<!-- desc-end -->

<!-- dev-start -->

## Документация для разработчиков

### Awz\Utm\App 

| Метод         | Возвращаемое значение | Описание                            |
|---------------|-----------------------|-------------------------------------|
| getSource()   | `string`              | Возвращает Источник кампании        |
| getMedium()   | `string`              | Возвращает Тип трафика              |
| getTerm()     | `string`              | Возвращает Название кампании        |
| getCampaign() | `string`              | Возвращает Идентификатор объявления |
| getContent()  | `string`              | Возвращает Ключевое слово           |
| isEmpty()     | `bool`                | если true, то UTM меток нет         |
| getHtml()     | `string`              | получение html значений меток       |


```php
use Awz\Utm\App as UtmApp;
if(\Bitrix\Main\Loader::includeModule('awz.utm')){

	$utm = UtmApp::getInstance();
	if($utm->isEmpty()){
		//нет меток
	}else{
	    echo $utm->getSource();
	}

}
```

<!-- dev-end -->

<!-- cl-start -->
## История версий

https://github.com/zahalski/awz.utm/blob/master/CHANGELOG.md

<!-- cl-end -->

